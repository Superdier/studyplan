<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/tools.css">
    <!-- Thêm CSS responsive mới -->
    <style>
        /* CSS Responsive cho mobile và tablet */
        @media (max-width: 1024px) {
            /* iPad và tablet nhỏ */
            .container {
                padding: 10px;
            }
            
            header h1 {
                font-size: 1.5rem;
            }
            
            .tabs {
                flex-wrap: nowrap;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .tab {
                padding: 10px 15px;
                font-size: 0.9rem;
                white-space: nowrap;
            }
            
            .week-selector {
                flex-direction: column;
                gap: 10px;
            }
            
            .schedule-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .dual-chart-row {
                flex-direction: column;
            }
            
            .stat-section.half-width {
                width: 100%;
            }
            
            .tool-controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .tts-buttons {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .timer-controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .timer-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            /* Điện thoại và tablet nhỏ */
            .schedule-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .day-card {
                margin-bottom: 15px;
            }
            
            .modal-content {
                width: 95%;
                margin: 5% auto;
                padding: 20px;
            }
            
            .timer-display {
                font-size: 2.5rem;
            }
            
            .task-row {
                flex-direction: column;
            }
            
            .task-row input, .task-row select, .task-row textarea {
                width: 100%;
                margin-bottom: 10px;
            }
            
            #writing-text, #tts-text {
                font-size: 16px; /* Ngăn zoom trên iOS */
            }
            
            .tool-section textarea {
                min-height: 120px;
            }
            
            .chart-wrapper {
                overflow-x: auto;
            }
            
            .chart-wrapper canvas {
                max-width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            /* Điện thoại nhỏ */
            header .user-info {
                flex-direction: column;
                text-align: center;
            }
            
            .tab {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
            
            .week-btn {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
            
            .timer-display {
                font-size: 2rem;
            }
            
            .tts-buttons button {
                padding: 10px;
                font-size: 0.9rem;
            }
            
            .speed-control, .voice-control {
                flex-direction: column;
                align-items: flex-start;
            }
        }
        
        /* Cải thiện trải nghiệm cảm ứng */
        button, .tab, .day-card, .study-item {
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        
        button:active, .tab:active, .day-card:active {
            opacity: 0.8;
            transform: scale(0.98);
        }
        
        /* Ngăn chặn hành vi mặc định trên thiết bị cảm ứng */
        .task-container, .tool-controls, .timer-controls {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Tối ưu cho công cụ luyện viết trên mobile */
        #writing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 5px;
        }
        
        .character-cell {
            width: 40px;
            height: 40px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ccc;
        }
        
        /* Đảm bảo modal hiển thị tốt trên mobile */
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: #fefefe;
            border-radius: 10px;
            max-width: 95%;
            max-height: 90%;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Tối ưu trải nghiệm kéo thả trên mobile */
        .task-container {
            overflow-y: auto;
            max-height: 50vh;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <div class="user-info">
                <img src="https://ui-avatars.com/api/?name=JLPT+Student&background=fdbb2d&color=fff" alt="User">
                <div>Châm nè</div>
            </div>

            <h1><i class="fas fa-book-open"></i> Đầu tư vào bản thân cho tương lai</h1>
            <div class="subtitle">
                Kế hoạch phát triển bản thân trong tiếng Nhật
            </div>
            <div class="date-range">
                <i class="fas fa-calendar-alt"></i> Chặng 1: 10/07/2025 - 06/12/2025 (21 tuần)
            </div>
            <button id="start-study-btn" class="btn btn-primary week-btn" style="margin-top: 15px">
                <i class="fas fa-play-circle"></i> Bắt đầu học
            </button>
        </header>

        <div class="tabs">
            <div class="tab active" data-tab="schedule">Lịch học</div>
            <div class="tab" data-tab="stats">Thống kê</div>
            <div class="tab" data-tab="resources">Tài nguyên</div>
            <div class="tab" data-tab="tools" id="tools">Công cụ</div>
        </div>

        <div class="tab-content active" id="schedule-tab">
            <div class="content">
                <div class="card" id="weekly-planner">
                    <h2 class="card-title">
                        <i class="fas fa-calendar-week"></i> Lịch học tuần này
                    </h2>

                    <div class="week-selector">
                        <button class="week-btn" id="prev-week">
                            <i class="fas fa-chevron-left"></i> Tuần trước
                        </button>
                        <div class="current-week" id="current-week-display">
                            Tuần 1: 10/07 - 16/07
                            <span class="phase-badge" style="margin-left: 10px;">Củng cố N2</span>
                        </div>
                        <button class="week-btn" id="next-week">
                            Tuần sau <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>

                    <div class="schedule-grid" id="weekly-schedule">
                        <!-- Lịch sẽ được render từ JavaScript -->
                    </div>

                    <div class="completed-count">
                        <i class="fas fa-tasks"></i> Đã hoàn thành:
                        <span id="completed-count">0</span>/<span id="total-tasks">0</span> nhiệm vụ
                    </div>

                    <div class="progress-container">
                        <div class="progress-header">
                            <span>Tiến độ tuần</span>
                            <span id="week-progress">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>
                </div>

                <div id="study-summary" class="card">
                    <h2 class="card-title">
                        <i class="fas fa-chart-line"></i> Thống kê & Tài nguyên
                    </h2>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-book fa-2x"></i>
                            <div class="stat-value">21</div>
                            <div class="stat-label">Tuần học tập</div>
                        </div>

                        <div class="stat-card">
                            <i class="fas fa-bullseye fa-2x"></i>
                            <div class="stat-value">Kaiwa TỐT</div>
                            <div class="stat-label">Mục tiêu cuối cùng</div>
                        </div>

                        <div class="stat-card">
                            <i class="fas fa-hourglass-half fa-2x"></i>
                            <div class="stat-value">142</div>
                            <div class="stat-label">Ngày còn lại</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="stats-tab">
            <div class="stats-container"> <!-- Thêm container chính -->
                <div class="stat-section"> <!-- Phần thẻ thống kê -->
                    <div class="card">
                        <h2 class="card-title"><i class="fas fa-chart-pie"></i> Tổng quan học tập</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <i class="fas fa-clock fa-2x"></i>
                                <div class="stat-value" id="total-hours">0</div>
                                <div class="stat-label">Giờ học tổng</div>
                            </div>

                            <div class="stat-card">
                                <i class="fas fa-tasks fa-2x"></i>
                                <div class="stat-value" id="completion-rate">0%</div>
                                <div class="stat-label">Tỷ lệ hoàn thành</div>
                            </div>

                            <div class="stat-card">
                                <i class="fas fa-fire fa-2x"></i>
                                <div class="stat-value" id="streak-days">0</div>
                                <div class="stat-label">Ngày học liên tiếp</div>
                            </div>

                            <div class="stat-card">
                                <i class="fas fa-check-circle fa-2x"></i>
                                <div class="stat-value" id="lessons-learned">0</div>
                                <div class="stat-label">Bài đã hoàn thành</div>
                            </div>
                        </div>

                        <!-- Biểu đồ tiến độ tuần (full width) -->
                        <div class="stat-section full-width">
                            <div class="card">
                                <div class="chart-header">
                                    <h3><i class="fas fa-chart-line"></i> Tiến độ theo tuần</h3>
                                </div>
                                <div class="chart-wrapper large-chart">
                                    <canvas id="progressChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="dual-chart-row">
                            <!-- Biểu đồ đánh giá kỹ năng -->
                            <div class="stat-section half-width">
                                <div class="card">
                                    <div class="chart-header">
                                        <h3><i class="fas fa-star"></i> Đánh giá kỹ năng</h3>
                                    </div>
                                    <div class="chart-wrapper medium-chart">
                                        <canvas id="skillRadarChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="stat-section half-width">
                                <div class="card">
                                    <div class="chart-header">
                                        <h3><i class="fas fa-clock"></i> Phân bố thời gian học</h3>
                                    </div>
                                    <div class="chart-wrapper medium-chart">
                                        <canvas id="timeDistributionChart"></canvas>
                                    </div>
                                    <div class="task-type-list" id="taskTypeList"></div>
                                </div>
                            </div>
                        </div>

                        <div class="stat-section">
                            <div class="card">
                                <div class="chart-header">
                                    <h3><i class="fas fa-book"></i> Các loại bài tập đã học</h3>
                                </div>
                                <div class="task-category-container" id="taskCategoryContainer"></div>
                            </div>
                        </div>

                        <!-- Trong phần Đánh giá thời gian học hiệu quả -->
                        <div class="stat-section">
                            <div class="card">
                                <div class="chart-header">
                                    <h3><i class="fas fa-book"></i> Đánh giá thời gian học hiệu quả</h3>
                                </div>

                                <div class="stat-card">
                                    <i class="fas fa-calendar-day fa-2x"></i>
                                    <div class="stat-value" id="daily-study-time">0h 0m</div>
                                    <div class="stat-label">Hôm nay</div>
                                </div>

                                <div class="stat-card">
                                    <i class="fas fa-calendar-week fa-2x"></i>
                                    <div class="stat-value" id="weekly-study-time">0h</div>
                                    <div class="stat-label">Tuần này</div>
                                </div>
                                <!-- 
                                <div class="stat-card">
                                    <i class="fas fa-chart-line fa-2x"></i>
                                    <div class="stat-value" id="best-study-time">Chưa có dữ liệu</div>
                                    <div class="stat-label">Giờ học hiệu quả</div>
                                </div> -->

                                <div class="stat-card">
                                    <i class="fas fa-chart-line fa-2x"></i>
                                    <div class="stat-value" id="max-streak">0</div>
                                    <div class="stat-label">🏆 Kỷ lục streak</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="resources-tab">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-book"></i> Tài nguyên học tập
                </h2>

                <div class="resources">
                    <h3><i class="fas fa-book-open"></i> Sách giáo trình</h3>
                    <ul class="resource-list">
                        <li class="resource-item">
                            <i class="fas fa-book"></i><a
                                href="https://drive.google.com/drive/folders/18pEPRYZCFwDM1mfG-Ul8LxIkrQjNuAYc?usp=sharing"
                                target="_blank" rel="noopener noreferrer">
                                Shin Kanzen Master N1</a>
                        </li>
                        <li class="resource-item">
                            <i class="fas fa-book"></i><a
                                href="https://drive.google.com/drive/folders/1A53-PaWkIfyKqYBrDeEI3PPHnAQMUjU8?usp=sharing"
                                target="_blank" rel="noopener noreferrer">
                                Soumatome N1</a>
                        </li>
                    </ul>

                    <h3><i class="fas fa-headphones"></i> Tài nguyên nghe</h3>
                    <ul class="resource-list">
                        <li class="resource-item">
                            <i class="fas fa-podcast"></i><a href="https://www3.nhk.or.jp/news/easy/" target="_blank"
                                rel="noopener noreferrer"> NHK News Web
                                Easy</a>
                        </li>
                        <li class="resource-item">
                            <i class="fas fa-globe"></i><a href="https://supernative.tv/ja/" target="_blank"
                                rel="noopener noreferrer"> Super Native Japanese</a>
                        </li>
                        <li class="resource-item">
                            <i class="fas fa-podcast"></i><a href="https://nihongoconteppei.com/" target="_blank"
                                rel="noopener noreferrer"> Nihongo con
                                Teppei</a>
                        </li>
                    </ul>

                    <h3><i class="fas fa-laptop"></i> Website & Ứng dụng & Công cụ hỗ trợ</h3>
                    <ul class="resource-list">
                        <li class="resource-item">
                            <i class="fas fa-mobile-alt"></i><a
                                href="https://docs.google.com/spreadsheets/d/1_blVZly36X8U-23NPxMeUjpf4n7c5YVv/edit?usp=sharing&ouid=102464601056562595135&rtpof=true&sd=true"
                                target="_blank" rel="noopener noreferrer"> Log Excel</a>
                        </li>
                        <li class="resource-item">
                            <i class="fas fa-mobile-alt"></i><a href="https://recall.cards/app" target="_blank"
                                rel="noopener noreferrer"> Recall Card</a>
                        </li>
                        <li class="resource-item">
                            <i class="fas fa-globe"></i><a href="https://flashcard-ashen-three.vercel.app/"
                                target="_blank" rel="noopener noreferrer">Flashcard
                                Web Cá Nhân</a>
                        </li>
                        <li class="resource-item">
                            <i class="fas fa-globe"></i><a
                                href="https://www.tiengnhatdongian.com/flashcard-category/jlpt-n2/flashcard-2500-tu-vung-n2/"
                                target="_blank" rel="noopener noreferrer">Flashcard
                                Web Tiengnhatdongian</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="tab-content" id="tools-tab">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-book-open"></i> Công cụ
                </h2>

                <div class="tools-container">
                    <!-- Writing Practice Tool -->
                    <div class="card">
                        <h2 class="card-title"><i class="fas fa-pencil-alt"></i> Luyện viết chữ Hán</h2>
                        <div class="tool-section">
                            <textarea id="writing-text" placeholder="Nhập văn bản tiếng Nhật để luyện viết..."
                                rows="5"></textarea>
                            <div class="tool-controls">
                                <button id="generate-grid" class="btn btn-primary">Tạo lưới luyện viết</button>
                                <button id="export-pdf" class="btn btn-secondary" disabled>Xuất PDF toàn bộ</button>
                                <button id="export-kanji-pdf" class="btn btn-secondary">Xuất PDF theo kanji</button>
                            </div>


                            <div id="writing-grid-container" class="hidden">
                                <div id="writing-grid"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Text-to-Speech Tool -->
                    <div class="card">
                        <h2 class="card-title"><i class="fas fa-volume-up"></i> Đọc văn bản (Text-to-Speech)</h2>
                        <div class="tool-section">
                            <textarea id="tts-text" placeholder="Nhập văn bản tiếng Nhật để nghe..."
                                rows="5"></textarea>
                            <div class="tool-controls">
                                <div class="voice-control">
                                    <label>Giọng đọc:</label>
                                    <select id="tts-voice">
                                        <option value="">Đang tải giọng...</option>
                                    </select>
                                </div>
                                <div class="speed-control">
                                    <label>Tốc độ:</label>
                                    <input type="range" id="tts-speed" min="0.5" max="2" step="0.1" value="1">
                                    <span id="speed-value">1.0x</span>
                                </div>
                                <div class="tts-buttons">
                                    <button id="play-tts" class="btn btn-primary"><i class="fas fa-play"></i>
                                        Phát</button>
                                    <button id="pause-tts" class="btn btn-secondary" disabled><i
                                            class="fas fa-pause"></i>
                                        Tạm dừng</button>
                                    <button id="stop-tts" class="btn btn-secondary" disabled><i class="fas fa-stop"></i>
                                        Dừng</button>
                                </div>
                            </div>
                            <div id="tts-highlight-container" class="hidden">
                                <div id="tts-text-display"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- <div class="tab-content" id="ai-tab">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-robot"></i> Trợ lý AI Học tập
                </h2>

                <div class="ai-suggestion">
                    <h3><i class="fas fa-lightbulb"></i> Gợi ý học tập</h3>
                    <p id="ai-suggestion-content">Bạn nên tập trung vào các điểm ngữ pháp N2 trước khi chuyển sang N1.
                        Hãy dành ít nhất 45 phút mỗi ngày cho việc học ngữ pháp và làm bài tập.</p>
                </div>

                <div class="ai-suggestion">
                    <h3><i class="fas fa-question-circle"></i> Hỏi đáp với AI</h3>
                    <p>Đặt câu hỏi về ngữ pháp, từ vựng hoặc bất kỳ thắc mắc nào:</p>
                    <textarea style="resize: none;" class="task-input" id="ai-question"
                        placeholder="Câu hỏi của bạn..."></textarea>
                    <button class="week-btn" id="submit-question">Gửi câu hỏi</button>
                    <div id="ai-response"
                        style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px; display: none;">
                        <p><strong>Trả lời:</strong> <span id="ai-answer"></span></p>
                    </div>
                    <div style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                        <p>
                            <strong>Ví dụ:</strong> "Sự khác nhau giữa ～はずだ và ～べきだ?"
                        </p>
                    </div>
                </div>

                <div class="ai-suggestion">
                    <h3><i class="fas fa-chart-line"></i> Phân tích tiến độ</h3>
                    <div id="progress-analysis">
                        <p>Dựa trên dữ liệu học tập của bạn, AI gợi ý bạn nên tập trung nhiều hơn vào kỹ năng nghe hiểu.
                            Hãy dành thêm 20% thời gian học cho kỹ năng này.</p>
                    </div>
                </div>
            </div>
        </div> -->

        <footer>
            <p>Lộ trình học JLPT N1 - Được thiết kế dành riêng cho bạn</p>
            <p>Dựa trên kế hoạch từ 10/7/2025 đến 6/12/2025</p>
        </footer>
    </div>

    <!-- Modal chỉnh sửa nhiệm vụ -->
    <div class="modal" id="edit-day-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-edit-modal">&times;</span>
            <h2><i class="fas fa-edit"></i> Chỉnh sửa nhiệm vụ</h2>
            <div id="modal-date">Thứ 2, 10/07/2025</div>

            <div class="form-group" style="display: none;">
                <label>Thời gian học (phút):</label>
                <input type="number" id="study-duration" min="0" value="60">
            </div>

            <h3>Nhiệm vụ:</h3>
            <div id="tasks-container" class="task-container">
                <!-- Nhiệm vụ sẽ được thêm động ở đây -->
            </div>

            <button id="add-task-btn" class="btn btn-primary">
                <i class="fas fa-plus"></i> Thêm nhiệm vụ
            </button>
            <button id="save-day-btn" class="btn btn-primary" style="margin-top: 15px">
                <i class="fas fa-save"></i> Lưu thay đổi
            </button>
        </div>
    </div>

    <!-- Modal đếm ngược thời gian học -->
    <div class="modal" id="countdown-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-countdown-modal">&times;</span>
            <h2><i class="fas fa-clock"></i> Thời gian học tập</h2>

            <div class="timer-settings">
                <div class="timer-setting">
                    <label>Thời gian học (phút)</label>
                    <input type="number" id="study-minutes" min="1" value="45" />
                </div>
                <div class="timer-setting">
                    <label>Thời gian nghỉ (phút)</label>
                    <input type="number" id="break-minutes" min="1" value="5" />
                </div>
            </div>

            <div class="timer-container">
                <div class="timer-display" id="timer-display">45:00</div>
                <div class="timer-controls">
                    <button class="timer-btn start" id="start-timer">Bắt đầu</button>
                    <button class="timer-btn pause" id="pause-timer" style="display: none">
                        Tạm dừng
                    </button>
                    <button class="timer-btn stop" id="stop-timer" style="display: none">
                        Dừng
                    </button>
                </div>
                <div class="timer-status" id="timer-status">
                    Sẵn sàng bắt đầu học...
                </div>
            </div>

            <div class="rest-suggestion">
                <p><i class="fas fa-lightbulb"></i> Sau thời gian học, bạn nên:</p>
                <ul style="list-style: none;">
                    <li>Nhắm mắt nghỉ ngơi 1 phút</li>
                    <li>Uống một ly nước</li>
                    <li>Đi bộ vài bước xung quanh</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Modal nghỉ ngơi -->
    <div class="modal" id="break-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-break-modal">&times;</span>
            <h2><i class="fas fa-coffee"></i> Đã đến lúc nghỉ ngơi!</h2>
            <p id="break-message">
                <!-- Nội dung sẽ được cập nhật bằng JavaScript -->
            </p>
            <button class="week-btn" id="start-break-btn">Bắt đầu nghỉ ngơi</button>
        </div>
    </div>
    <!-- Thêm sau body -->
    <div id="mobile-warning" style="display: none; background: #fff3cd; padding: 10px; text-align: center;">
        <i class="fas fa-info-circle"></i> Đang sử dụng phiên bản mobile
    </div>

    <script>
        // Mobile detection and warning
        if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
            document.getElementById('mobile-warning').style.display = 'block';

            // Thêm iOS specific warning
            if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                const iosWarning = document.createElement('div');
                iosWarning.style.background = '#e3f2fd';
                iosWarning.style.padding = '10px';
                iosWarning.style.margin = '10px 0';
                iosWarning.innerHTML = `
      <i class="fas fa-mobile-alt"></i> 
      <strong>iOS Tip:</strong> Sử dụng Safari hoặc Chrome để tốt nhất
    `;
                document.getElementById('tools-tab').prepend(iosWarning);
            }
        }
    </script>

    <script src="js/script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="js/tools.js"></script>
    <!-- Thêm JavaScript xử lý sự kiện cảm ứng -->
    <script>
        // Xử lý sự kiện touch để tránh delay trên iOS
        document.addEventListener('DOMContentLoaded', function() {
            // FastClick cho các phần tử tương tác
            const interactiveElements = document.querySelectorAll('button, .tab, .day-card, .study-item, input, select, textarea');
            
            interactiveElements.forEach(element => {
                element.addEventListener('touchstart', function() {
                    this.classList.add('touch-active');
                });
                
                element.addEventListener('touchend', function() {
                    this.classList.remove('touch-active');
                });
            });
            
            // Ngăn zoom double-tap trên các phần tử tương tác
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function(event) {
                const now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
            
            // Đảm bảo các input không bị zoom trên iOS
            const inputs = document.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    window.setTimeout(() => {
                        document.body.style.zoom = 1.0;
                    }, 100);
                });
            });
        });
    </script>
</body>

</html>